<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.itbank.mall.mapper.admin.GradeRuleMapper">

  <!-- 전체 조회 -->
  <select id="selectAllRules" resultType="com.itbank.mall.entity.grade.GradeRuleEntity">
    SELECT 
      grade_id AS gradeId,
      grade_name AS gradeName,
      min_spending AS minSpending,
      display_order AS displayOrder
    FROM grade_rule
    ORDER BY display_order ASC
  </select>

  <!-- 등급 추가 -->
  <insert id="insertRule" parameterType="com.itbank.mall.entity.grade.GradeRuleEntity">
    INSERT INTO grade_rule (grade_name, min_spending, display_order)
    VALUES (#{gradeName}, #{minSpending}, #{displayOrder})
  </insert>

  <!-- 등급 수정: grade_id 기준 -->
  <update id="updateRuleById" parameterType="com.itbank.mall.entity.grade.GradeRuleEntity">
    UPDATE grade_rule
    SET grade_name = #{gradeName},
        min_spending = #{minSpending},
        display_order = #{displayOrder}
    WHERE grade_id = #{gradeId}
  </update>

  <!-- 등급 삭제: grade_id 기준 -->
  <delete id="deleteRuleById" parameterType="long">
    DELETE FROM grade_rule
    WHERE grade_id = #{gradeId}
  </delete>

</mapper>
